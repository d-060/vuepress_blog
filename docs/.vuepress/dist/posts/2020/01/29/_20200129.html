<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>サイトURLをhttpsにしたのに「このサイトへの接続は完全には保護されていません」というメッセージが表示された場合の対処方法 | WEB活 日記</title>
    <meta name="description" content="サイトのSSL化について、URLは間違いなくhttpsに変更されている。それなのに「このサイトへの接続は完全には保護されていません」というメッセージが出てきてしまう...">
    <link href="/assets/css/style.css" rel="stylesheet">
    <link rel="preload" href="/assets/css/0.styles.671c024c.css" as="style"><link rel="preload" href="/assets/js/app.60a0c74a.js" as="script"><link rel="preload" href="/assets/js/6.1bc8b44f.js" as="script"><link rel="preload" href="/assets/js/15.92001493.js" as="script"><link rel="prefetch" href="/assets/js/1.e32b0c25.js"><link rel="prefetch" href="/assets/js/10.2e16cb53.js"><link rel="prefetch" href="/assets/js/11.fc6e8c71.js"><link rel="prefetch" href="/assets/js/12.290732ab.js"><link rel="prefetch" href="/assets/js/13.b2c54047.js"><link rel="prefetch" href="/assets/js/14.3f520583.js"><link rel="prefetch" href="/assets/js/16.11ea7bad.js"><link rel="prefetch" href="/assets/js/17.48bcefa0.js"><link rel="prefetch" href="/assets/js/18.2da0321e.js"><link rel="prefetch" href="/assets/js/19.27d0200b.js"><link rel="prefetch" href="/assets/js/20.791702cb.js"><link rel="prefetch" href="/assets/js/3.58f7b169.js"><link rel="prefetch" href="/assets/js/4.55d6c324.js"><link rel="prefetch" href="/assets/js/5.16afb897.js"><link rel="prefetch" href="/assets/js/7.1bb637bb.js"><link rel="prefetch" href="/assets/js/8.e93fe492.js"><link rel="prefetch" href="/assets/js/9.44206a97.js">
    <link rel="stylesheet" href="/assets/css/0.styles.671c024c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-0be91240><div data-v-3e9833e9 data-v-0be91240><nav class="navbar" data-v-3e9833e9><div class="container" data-v-3e9833e9><a href="/" class="router-link-active" data-v-3e9833e9><span class="navbar-site-name" data-v-3e9833e9>
          WEB活 日記
        </span></a> <div class="navbar-toggler" data-v-3e9833e9><svg class="icon" style="font-size:1.2em;" data-v-3e9833e9 data-v-3e9833e9><title data-v-3e9833e9 data-v-3e9833e9>menu</title><use xlink:href="#icon-menu" data-v-3e9833e9 data-v-3e9833e9></use></svg></div> <div class="navbar-links" data-v-3e9833e9><a href="/" class="navbar-link" data-v-3e9833e9>
            Home
          </a><a href="/_posts/" class="navbar-link" data-v-3e9833e9>
            All Posts
          </a><a href="/_posts/categories/" class="navbar-link" data-v-3e9833e9>
            Categories
          </a><a href="/about/" class="navbar-link" data-v-3e9833e9>
            About
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-3e9833e9></div></div> <div class="banner" data-v-98d6aa8c data-v-0be91240 data-v-0be91240><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-0be91240>
          サイトURLをhttpsにしたのに「このサイトへの接続は完全には保護されていません」というメッセージが表示された場合の対処方法
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-6e91a59a data-v-6e91a59a><main class="main" data-v-6e91a59a><div class="post" data-v-6e91a59a data-v-6e91a59a><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      作成日 : 2020-01-29
    </span> <span class="update-date" data-v-4e23451f>
      更新日 : 2020-01-31
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/01/28/_20200128.html" class="post-link" data-v-4e23451f>
      前の投稿 : VuePressにgoogleアナリティクスを設置する方法。(meteorlxyでも出来ます)1行追記してあげるだけ。
    </a> <!----></section></section> <article class="main-div"><div class="post-content content content__default"><h1 id="ssl化したはずなのに「このサイトへの接続は完全には保護されていません」の表示が出現されてしまう。"><a href="#ssl化したはずなのに「このサイトへの接続は完全には保護されていません」の表示が出現されてしまう。" class="header-anchor">#</a> SSL化したはずなのに「このサイトへの接続は完全には保護されていません」の表示が出現されてしまう。</h1> <p><img src="/assets/img/20200129.png" alt="警告" title="警告"></p> <p>サイトのSSL化について、URLは間違いなくhttpsに変更されている。<br>
それなのに「このサイトへの接続は完全には保護されていません」というメッセージが出てきてしまう...</p> <p>そんなときにどのようにしたらメッセージを解消出来るのか、サイトが正常にSSL化されるのか。</p> <p>下記で解説いたします。</p> <h2 id="ssl化に伴う2つの作業"><a href="#ssl化に伴う2つの作業" class="header-anchor">#</a> SSL化に伴う2つの作業</h2> <p>SSL化の作業には<strong>大きく分けて2つの作業</strong>があります。</p> <ol><li>SSL証明書を所得し、サーバに紐づける作業(URLの正規化)</li> <li>サイト内のリンクを全てSSL通信に対応させる</li></ol> <h2 id="url正規化とは"><a href="#url正規化とは" class="header-anchor">#</a> URL正規化とは</h2> <p>簡単に言うと、1.はサイト自体のURLをhttpsに変更するための作業です。<br>
「URLの正規化」と呼ばれる作業になります。</p> <ul><li>URL正規化の例
<ul><li><strong>index.html</strong>などの有無の統一（サイトTOPページ、各ディレクトリTOPページ等のURL末尾）</li> <li><strong>www</strong>の有無の統一(基本的にはwww有りに統一するのが無難)</li> <li>http:// と https:// (暗号化の有無。googleは「https」を推奨しています)</li> <li>SP と PCで別ページの場合(レスポンシブではない場合：canonical属性を用いて正規化することが一般的)</li></ul></li></ul> <p>そして、2.はサイト内のCSSや画像などの読み込みに関して<br> <strong>http://...</strong> というものを<strong>https://...</strong> に変更してあげる作業になります。</p> <h2 id="サイト内のssl化"><a href="#サイト内のssl化" class="header-anchor">#</a> サイト内のSSL化</h2> <p>今回は、URLは正常に<strong><a href="https://xn--gj7c" target="_blank" rel="noopener noreferrer">https://～<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong>に変更されているということなので、<br>
2.の作業が必要ではないかと思われます。</p> <p>※サイトURL自体がhttpからhttpsに変更されない!!という方は、<br>
http → httpsへの301リダイレクト等の処理が必要になります。</p> <h2 id="ミックスドコンテント-mixed-content"><a href="#ミックスドコンテント-mixed-content" class="header-anchor">#</a> ミックスドコンテント(mixed content)</h2> <p>Google Chromeのデベロッパーツールで実際にMixed contentが発生しているか確認しましょう。</p> <p><img src="/assets/img/20200129_2.png" alt="mixed content" title="mixed content">
デベロッパーツールを開き、上記のバーの中から、Consoleを選んでください。</p> <p>下記のような文章が確認出来ると思います。<br> <img src="/assets/img/20200129_3.png" alt="mixed content" title="mixed content"></p> <p>この文章が確認できた場合、続く文章にmixed contentの発生元が記載してあるはずです。
その部分をhttpsに変更してMixed contentを解消してあげましょう。</p> <details><summary>混合コンテンツ(Mixed Content)が特に発生しやすい箇所</summary> <span style="color:red;">画像・動画</span>を読み込むURL  <br> <span style="color:red;">CSS</span>を読み込むURL  <br> <span style="color:red;">JavaScript</span>を読み込むURL  </details> <h2 id="mixed-content解消後"><a href="#mixed-content解消後" class="header-anchor">#</a> Mixed content解消後</h2> <p>Mixed content解消後、<br>
ページ上部URLの左端が南京錠の鍵マークになっていれば成功です。<br>
クリックするとメッセージが下記のような文章になっているはずです。
<img src="/assets/img/20200129_1.png" alt="保護" title="保護"></p> <h2 id="追記"><a href="#追記" class="header-anchor">#</a> 追記</h2> <p>私が経験したMixed Contentの事例を紹介します。</p> <p>記事の内容のように、URLがhttpsとなっているにも関わらず「<strong>保護されておりません</strong>」というメッセージが表示されてしまいました。<br>
google Chromeのデベロッパーツールにて確認したところ、「<strong>一部の画像がhttpのサイトから読み込んでいる</strong>」という内容でした。</p> <p>しかし、htmlファイルを探してもそのようなURLは読み込んでいませんでした。<br>
それならばと、<strong>CSSファイルを確認し、バックグラウンドに設定している画像</strong>を探すと該当のURLが見つかりました。<br>
このようにURLを記述しているファイルを順番に探していけば原因に辿り着くはずです。</p> <p>普段から絶対パスでリンクを記述している方は気をつけましょう。</p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      作成日 : 2020-01-29
    </span> <span class="update-date" data-v-4e23451f>
      更新日 : 2020-01-31
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/01/28/_20200128.html" class="post-link" data-v-4e23451f>
      前の投稿 : VuePressにgoogleアナリティクスを設置する方法。(meteorlxyでも出来ます)1行追記してあげるだけ。
    </a> <!----></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-6e91a59a><div class="info-card main-div" data-v-23d90c50 data-v-6e91a59a><div class="info-card-header" data-v-23d90c50><img src="/assets/img/logo.png" alt="Daiki" class="info-avatar" data-v-23d90c50></div> <div class="info-card-body" data-v-23d90c50><section class="info-nickname" data-v-23d90c50>
      Daiki
    </section> <section class="info-desc" data-v-23d90c50>27years old Web designer</section> <section class="info-contact" data-v-23d90c50><section data-v-23d90c50><span title="Japan" data-v-23d90c50 data-v-23d90c50><svg class="icon" style="font-size:1em;" data-v-23d90c50 data-v-23d90c50><title data-v-23d90c50 data-v-23d90c50>Japan</title><use xlink:href="#icon-location" data-v-23d90c50 data-v-23d90c50></use></svg><span class="info-text" data-v-23d90c50 data-v-23d90c50>
          Japan
        </span></span></section> <!----> <!----></section></div> <div class="info-card-footer" data-v-23d90c50><section class="info-sns clearfix" data-v-23d90c50><a href="https://twitter.com/net09953658" target="_blank" class="sns-link" data-v-23d90c50><span title="Twitter: net09953658" class="sns-icon" data-v-23d90c50 data-v-23d90c50><svg class="icon" style="font-size:1.5em;" data-v-23d90c50 data-v-23d90c50><title data-v-23d90c50 data-v-23d90c50>Twitter: net09953658</title><use xlink:href="#icon-twitter" data-v-23d90c50 data-v-23d90c50></use></svg></span></a><a href="https://www.instagram.com/painter_animals" target="_blank" class="sns-link" data-v-23d90c50><span title="Instagram: painter_animals" class="sns-icon" data-v-23d90c50 data-v-23d90c50><svg class="icon" style="font-size:1.5em;" data-v-23d90c50 data-v-23d90c50><title data-v-23d90c50 data-v-23d90c50>Instagram: painter_animals</title><use xlink:href="#icon-instagram" data-v-23d90c50 data-v-23d90c50></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-6e91a59a><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>目次</span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/01/29/_20200129.html#ssl化に伴う2つの作業">SSL化に伴う2つの作業</a></li><li><a href="/posts/2020/01/29/_20200129.html#url正規化とは">URL正規化とは</a></li><li><a href="/posts/2020/01/29/_20200129.html#サイト内のssl化">サイト内のSSL化</a></li><li><a href="/posts/2020/01/29/_20200129.html#ミックスドコンテント-mixed-content">ミックスドコンテント(mixed content)</a></li><li><a href="/posts/2020/01/29/_20200129.html#mixed-content解消後">Mixed content解消後</a></li><li><a href="/posts/2020/01/29/_20200129.html#追記">追記</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/01/29/_20200129.html#post-comments">
      コメント
    </a></div></div></aside></div> <footer class="footer" data-v-f018ab8c><p class="footer-sns-links" data-v-f018ab8c><a href="https://twitter.com/net09953658" target="_blank" class="sns-link" data-v-f018ab8c><span title="Twitter: net09953658" class="sns-icon" data-v-f018ab8c data-v-f018ab8c><svg class="icon" style="font-size:25px;" data-v-f018ab8c data-v-f018ab8c><title data-v-f018ab8c data-v-f018ab8c>Twitter: net09953658</title><use xlink:href="#icon-twitter" data-v-f018ab8c data-v-f018ab8c></use></svg></span></a><a href="https://www.instagram.com/painter_animals" target="_blank" class="sns-link" data-v-f018ab8c><span title="Instagram: painter_animals" class="sns-icon" data-v-f018ab8c data-v-f018ab8c><svg class="icon" style="font-size:25px;" data-v-f018ab8c data-v-f018ab8c><title data-v-f018ab8c data-v-f018ab8c>Instagram: painter_animals</title><use xlink:href="#icon-instagram" data-v-f018ab8c data-v-f018ab8c></use></svg></span></a></p> <p class="footer-text" data-v-f018ab8c><span data-v-f018ab8c>Powered by </span> <a href="https://github.com/vuejs/vuepress" target="_blank" data-v-f018ab8c>
      VuePress
    </a> <span data-v-f018ab8c> | </span> <a href="https://github.com/meteorlxy/vuepress-theme-meteorlxy" target="_blank" data-v-f018ab8c>
        meteorlxy
      </a></p> <!----></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.60a0c74a.js" defer></script><script src="/assets/js/6.1bc8b44f.js" defer></script><script src="/assets/js/15.92001493.js" defer></script>
  </body>
</html>
